version: "2"
services:
   nna:
      image: flokkr/hadoop:${VERSION}
      hostname: nna
      ports:
         - 9870:9870
      env_file:
        - ./config
      environment:
          ENSURE_NAMENODE_DIR: "/tmp/hadoop-hdfs/dfs/name"
          ENSURE_NAMENODE_CLUSTERID: "c1"
      command: ["hdfs","namenode"]
      volumes:
         - ./namenodeformat.sh:/opt/launcher/plugins/012_namenodeformat/namenodeformat.sh
   nnb:
      image: flokkr/hadoop:${VERSION}
      hostname: nnb
      ports:
         - 9871:9870
      env_file:
        - ./config
      volumes:
         - ./namenodeformat.sh:/opt/launcher/plugins/012_namenodeformat/namenodeformat.sh
      environment:
          ENSURE_NAMENODE_DIR: "/tmp/hadoop-hdfs/dfs/name"
          ENSURE_NAMENODE_CLUSTERID: "c1"
      command: ["hdfs","namenode"]
   datanode:
      image: flokkr/hadoop:${VERSION}
      env_file:
        - ./config
      command: ["hdfs","datanode"]
